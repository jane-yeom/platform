<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ¬ì¸ê³µê³ </title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

<div class="container">
    <h1>êµ¬ì¸ê³µê³ </h1>

    <!-- ìœ ë£Œ ê³µê³  (ìƒë‹¨ ê³ ì •) -->
    <section>
        <h2>ğŸ“Œ ìœ ë£Œ ê³µê³ </h2>
        <div id="paid-job-list">
            <p>ìœ ë£Œ ê³µê³ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
    </section>

    <!-- ë¬´ë£Œ ê³µê³  (í•˜ë‹¨ ë¦¬ìŠ¤íŠ¸) -->
    <section>
        <h2>ğŸ“ ë¬´ë£Œ ê³µê³ </h2>
        <div id="free-job-list">
            <p>ë¬´ë£Œ ê³µê³ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
    </section>

    <div><a href="job_post.html">êµ¬ì¸ê³µê³ ë“±ë¡</a></div>
</div>

<script>
    // ìœ ë£Œ ê³µê³  ë¶ˆëŸ¬ì˜¤ê¸°
    fetch('/api/posts/job/paid')
        .then(response => response.json())
        .then(jobs => {
            const paidList = document.getElementById('paid-job-list');
            paidList.innerHTML = "";
            if (!jobs || jobs.length === 0) {
                paidList.innerHTML = "<p>ë“±ë¡ëœ ìœ ë£Œ ê³µê³ ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
            } else {
                jobs.forEach(job => {
                    const jobItem = document.createElement("div");
                    jobItem.className = "job-card paid";
                    jobItem.innerHTML = `<a href="/job_post_detail.html?id=${job.id}">${job.title}</a>
                                         <span>${job.companyName} | ${new Date(job.createdAt).toLocaleDateString()}</span>`;
                    paidList.appendChild(jobItem);
                });
            }
        })
        .catch(error => {
            console.error(error);
            document.getElementById('paid-job-list').innerHTML = "<p>ìœ ë£Œ ê³µê³ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
        });

    // ë¬´ë£Œ ê³µê³  ë¶ˆëŸ¬ì˜¤ê¸°
    fetch('/api/posts/job/free')
        .then(response => response.json())
        .then(jobs => {
            const freeList = document.getElementById('free-job-list');
            freeList.innerHTML = "";
            if (!jobs || jobs.length === 0) {
                freeList.innerHTML = "<p>ë“±ë¡ëœ ë¬´ë£Œ ê³µê³ ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
            } else {
                jobs.forEach(job => {
                    const jobItem = document.createElement("div");
                    jobItem.className = "job-card free";
                    jobItem.innerHTML = `<a href="/job_post_detail.html?id=${job.id}">${job.title}</a>
                                         <span>${job.companyName} | ${new Date(job.createdAt).toLocaleDateString()}</span>`;
                    freeList.appendChild(jobItem);
                });
            }
        })
        .catch(error => {
            console.error(error);
            document.getElementById('free-job-list').innerHTML = "<p>ë¬´ë£Œ ê³µê³ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
        });
</script>

</body>
</html>
